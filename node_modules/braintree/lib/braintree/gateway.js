//@ sourceMappingURL=gateway.map
// Generated by CoffeeScript 1.6.1
var ErrorResponse, Gateway, SearchResponse, exceptions;

ErrorResponse = require('./error_response').ErrorResponse;

SearchResponse = require('./search_response').SearchResponse;

exceptions = require('./exceptions');

Gateway = (function() {

  function Gateway() {}

  Gateway.prototype.createResponseHandler = function(attributeName, klass, callback) {
    return function(err, response) {
      if (err) {
        return callback(err, response);
      }
      if (response[attributeName]) {
        response.success = true;
        if (klass != null) {
          response[attributeName] = new klass(response[attributeName]);
        }
        return callback(null, response);
      } else if (response.apiErrorResponse) {
        return callback(null, new ErrorResponse(response.apiErrorResponse));
      }
    };
  };

  Gateway.prototype.searchResponseHandler = function(pagingFunction, callback) {
    return function(err, response) {
      var container;
      if (err) {
        return callback(err, response);
      }
      if (response["searchResults"]) {
        container = new SearchResponse(pagingFunction, response);
        return callback(null, container);
      } else if (response.apiErrorResponse) {
        return callback(null, new ErrorResponse(response.apiErrorResponse));
      } else {
        return callback(exceptions.DownForMaintenanceError(), null);
      }
    };
  };

  return Gateway;

})();

exports.Gateway = Gateway;
